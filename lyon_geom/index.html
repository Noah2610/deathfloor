<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `lyon_geom` crate."><meta name="keywords" content="rust, rustlang, rust-lang, lyon_geom"><title>lyon_geom - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../dark.css"><link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle"><script src="../storage.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="shortcut icon" href="../favicon.ico"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc mod"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../lyon_geom/index.html'><div class='logo-container'><img src='https://nical.github.io/lyon-doc/lyon-logo.svg' alt='logo'></div></a><p class='location'>Crate lyon_geom</p><div class="sidebar-elems"><a id='all-types' href='all.html'><p>See all lyon_geom's items</p></a><div class="block items"><ul><li><a href="#reexports">Re-exports</a></li><li><a href="#modules">Modules</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#traits">Traits</a></li></ul></div><p class='location'></p><script>window.sidebarCurrent = {name: 'lyon_geom', ty: 'mod', relpath: '../'};</script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!"><img src="../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices"></div></div><script src="../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><a id="settings-menu" href="../settings.html"><img src="../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class='fqn'><span class='out-of-band'><span id='render-detail'><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class='inner'>&#x2212;</span>]</a></span><a class='srclink' href='../src/lyon_geom/lib.rs.html#1-282' title='goto source code'>[src]</a></span><span class='in-band'>Crate <a class="mod" href=''>lyon_geom</a></span></h1><div class='docblock'><p>Simple 2D geometric primitives on top of euclid.</p>
<p>This crate is reexported in <a href="https://docs.rs/lyon/">lyon</a>.</p>
<h1 id="overview" class="section-header"><a href="#overview">Overview.</a></h1>
<p>This crate implements some of the maths to work with:</p>
<ul>
<li>lines and line segments,</li>
<li>quadratic and cubic bézier curves,</li>
<li>elliptic arcs,</li>
<li>triangles.</li>
</ul>
<h1 id="flattening" class="section-header"><a href="#flattening">Flattening</a></h1>
<p>Flattening is the action of approximating a curve with a succession of line segments.</p>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 30" height="30mm" width="120mm">
  <path d="M26.7 24.94l.82-11.15M44.46 5.1L33.8 7.34" fill="none" stroke="#55d400" stroke-width=".5"/>
  <path d="M26.7 24.94c.97-11.13 7.17-17.6 17.76-19.84M75.27 24.94l1.13-5.5 2.67-5.48 4-4.42L88 6.7l5.02-1.6" fill="none" stroke="#000"/>
  <path d="M77.57 19.37a1.1 1.1 0 0 1-1.08 1.08 1.1 1.1 0 0 1-1.1-1.08 1.1 1.1 0 0 1 1.08-1.1 1.1 1.1 0 0 1 1.1 1.1" color="#000" fill="none" stroke="#030303" stroke-linecap="round" stroke-opacity=".5"/>
  <path d="M77.57 19.37a1.1 1.1 0 0 1-1.08 1.08 1.1 1.1 0 0 1-1.1-1.08 1.1 1.1 0 0 1 1.08-1.1 1.1 1.1 0 0 1 1.1 1.1" color="#000" fill="#fff"/>
  <path d="M80.22 13.93a1.1 1.1 0 0 1-1.1 1.1 1.1 1.1 0 0 1-1.08-1.1 1.1 1.1 0 0 1 1.1-1.08 1.1 1.1 0 0 1 1.08 1.08" color="#000" fill="none" stroke="#030303" stroke-linecap="round" stroke-opacity=".5"/>
  <path d="M80.22 13.93a1.1 1.1 0 0 1-1.1 1.1 1.1 1.1 0 0 1-1.08-1.1 1.1 1.1 0 0 1 1.1-1.08 1.1 1.1 0 0 1 1.08 1.08" color="#000" fill="#fff"/>
  <path d="M84.08 9.55a1.1 1.1 0 0 1-1.08 1.1 1.1 1.1 0 0 1-1.1-1.1 1.1 1.1 0 0 1 1.1-1.1 1.1 1.1 0 0 1 1.08 1.1" color="#000" fill="none" stroke="#030303" stroke-linecap="round" stroke-opacity=".5"/>
  <path d="M84.08 9.55a1.1 1.1 0 0 1-1.08 1.1 1.1 1.1 0 0 1-1.1-1.1 1.1 1.1 0 0 1 1.1-1.1 1.1 1.1 0 0 1 1.08 1.1" color="#000" fill="#fff"/>
  <path d="M89.1 6.66a1.1 1.1 0 0 1-1.08 1.1 1.1 1.1 0 0 1-1.08-1.1 1.1 1.1 0 0 1 1.08-1.08 1.1 1.1 0 0 1 1.1 1.08" color="#000" fill="none" stroke="#030303" stroke-linecap="round" stroke-opacity=".5"/>
  <path d="M89.1 6.66a1.1 1.1 0 0 1-1.08 1.1 1.1 1.1 0 0 1-1.08-1.1 1.1 1.1 0 0 1 1.08-1.08 1.1 1.1 0 0 1 1.1 1.08" color="#000" fill="#fff"/>
  <path d="M94.4 5a1.1 1.1 0 0 1-1.1 1.1A1.1 1.1 0 0 1 92.23 5a1.1 1.1 0 0 1 1.08-1.08A1.1 1.1 0 0 1 94.4 5" color="#000" fill="none" stroke="#030303" stroke-linecap="round" stroke-opacity=".5"/>
  <path d="M94.4 5a1.1 1.1 0 0 1-1.1 1.1A1.1 1.1 0 0 1 92.23 5a1.1 1.1 0 0 1 1.08-1.08A1.1 1.1 0 0 1 94.4 5" color="#000" fill="#fff"/>
  <path d="M76.44 25.13a1.1 1.1 0 0 1-1.1 1.1 1.1 1.1 0 0 1-1.08-1.1 1.1 1.1 0 0 1 1.1-1.1 1.1 1.1 0 0 1 1.08 1.1" color="#000" fill="none" stroke="#030303" stroke-linecap="round" stroke-opacity=".5"/>
  <path d="M76.44 25.13a1.1 1.1 0 0 1-1.1 1.1 1.1 1.1 0 0 1-1.08-1.1 1.1 1.1 0 0 1 1.1-1.1 1.1 1.1 0 0 1 1.08 1.1" color="#000" fill="#fff"/>
  <path d="M27.78 24.9a1.1 1.1 0 0 1-1.08 1.08 1.1 1.1 0 0 1-1.1-1.08 1.1 1.1 0 0 1 1.1-1.1 1.1 1.1 0 0 1 1.08 1.1" color="#000" fill="none" stroke="#030303" stroke-linecap="round" stroke-opacity=".5"/>
  <path d="M27.78 24.9a1.1 1.1 0 0 1-1.08 1.08 1.1 1.1 0 0 1-1.1-1.08 1.1 1.1 0 0 1 1.1-1.1 1.1 1.1 0 0 1 1.08 1.1" color="#000" fill="#fff"/>
  <path d="M45.4 5.14a1.1 1.1 0 0 1-1.08 1.1 1.1 1.1 0 0 1-1.1-1.1 1.1 1.1 0 0 1 1.1-1.08 1.1 1.1 0 0 1 1.1 1.08" color="#000" fill="none" stroke="#030303" stroke-linecap="round" stroke-opacity=".5"/>
  <path d="M45.4 5.14a1.1 1.1 0 0 1-1.08 1.1 1.1 1.1 0 0 1-1.1-1.1 1.1 1.1 0 0 1 1.1-1.08 1.1 1.1 0 0 1 1.1 1.08" color="#000" fill="#fff"/>
  <path d="M28.67 13.8a1.1 1.1 0 0 1-1.1 1.08 1.1 1.1 0 0 1-1.08-1.08 1.1 1.1 0 0 1 1.08-1.1 1.1 1.1 0 0 1 1.1 1.1" color="#000" fill="none" stroke="#030303" stroke-linecap="round" stroke-opacity=".5"/>
  <path d="M28.67 13.8a1.1 1.1 0 0 1-1.1 1.08 1.1 1.1 0 0 1-1.08-1.08 1.1 1.1 0 0 1 1.08-1.1 1.1 1.1 0 0 1 1.1 1.1" color="#000" fill="#fff"/>
  <path d="M35 7.32a1.1 1.1 0 0 1-1.1 1.1 1.1 1.1 0 0 1-1.08-1.1 1.1 1.1 0 0 1 1.1-1.1A1.1 1.1 0 0 1 35 7.33" color="#000" fill="none" stroke="#030303" stroke-linecap="round" stroke-opacity=".5"/>
  <path d="M35 7.32a1.1 1.1 0 0 1-1.1 1.1 1.1 1.1 0 0 1-1.08-1.1 1.1 1.1 0 0 1 1.1-1.1A1.1 1.1 0 0 1 35 7.33" color="#000" fill="#fff"/>
  <text style="line-height:6.61458302px" x="35.74" y="284.49" font-size="5.29" font-family="Sans" letter-spacing="0" word-spacing="0" fill="#b3b3b3" stroke-width=".26" transform="translate(19.595 -267)">
    <tspan x="35.74" y="284.49" font-size="10.58">→</tspan>
  </text>
</svg>
<p>The flattening algorithm implemented in this crate is based on the paper
<a href="http://cis.usouthal.edu/%7Ehain/general/Publications/Bezier/Bezier%20Offset%20Curves.pdf">Fast, Precise Flattening of Cubic Bézier Segment Offset Curves</a>.
It tends to produce a better approximations than the usual recursive subdivision approach (or
in other words, it generates less segments for a given tolerance threshold).</p>
<p>The tolerance threshold taken as input by the flattening algorithms corresponds
to the maximum distance between the curve and its linear approximation.
The smaller the tolerance is, the more precise the approximation and the more segments
are generated. This value is typically chosen in function of the zoom level.</p>
<svg viewBox="0 0 47.5 13.2" height="100" width="350" xmlns="http://www.w3.org/2000/svg">
  <path d="M-2.44 9.53c16.27-8.5 39.68-7.93 52.13 1.9" fill="none" stroke="#dde9af" stroke-width="4.6"/>
  <path d="M-1.97 9.3C14.28 1.03 37.36 1.7 49.7 11.4" fill="none" stroke="#00d400" stroke-width=".57" stroke-linecap="round" stroke-dasharray="4.6, 2.291434"/>
  <path d="M-1.94 10.46L6.2 6.08l28.32-1.4 15.17 6.74" fill="none" stroke="#000" stroke-width=".6"/>
  <path d="M6.83 6.57a.9.9 0 0 1-1.25.15.9.9 0 0 1-.15-1.25.9.9 0 0 1 1.25-.15.9.9 0 0 1 .15 1.25" color="#000" stroke="#000" stroke-width=".57" stroke-linecap="round" stroke-opacity=".5"/>
  <path d="M35.35 5.3a.9.9 0 0 1-1.25.15.9.9 0 0 1-.15-1.25.9.9 0 0 1 1.25-.15.9.9 0 0 1 .15 1.24" color="#000" stroke="#000" stroke-width=".6" stroke-opacity=".5"/>
  <g fill="none" stroke="#ff7f2a" stroke-width=".26">
    <path d="M20.4 3.8l.1 1.83M19.9 4.28l.48-.56.57.52M21.02 5.18l-.5.56-.6-.53" stroke-width=".2978872"/>
  </g>
</svg>
<p>The figure above shows a close up on a curve (the dotted line) and its linear
approximation (the black segments). The tolerance threshold is represented by
the light green area and the orange arrow.</p>
</div><h2 id='reexports' class='section-header'><a href="#reexports">Re-exports</a></h2>
<table><tr><td><code>pub use <a class="mod" href="../arrayvec/index.html" title="mod arrayvec">arrayvec</a>;</code></td></tr><tr><td><code>pub use <a class="mod" href="../euclid/index.html" title="mod euclid">euclid</a>;</code></td></tr></table><h2 id='modules' class='section-header'><a href="#modules">Modules</a></h2>
<table><tr class='module-item'><td><a class="mod" href="arc/index.html" title='lyon_geom::arc mod'>arc</a></td><td class='docblock-short'><p>Elliptic arc related maths and tools.</p>
</td></tr><tr class='module-item'><td><a class="mod" href="cubic_bezier/index.html" title='lyon_geom::cubic_bezier mod'>cubic_bezier</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="mod" href="cubic_to_quadratic/index.html" title='lyon_geom::cubic_to_quadratic mod'>cubic_to_quadratic</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="mod" href="math/index.html" title='lyon_geom::math mod'>math</a></td><td class='docblock-short'><p>Basic types that are used everywhere. Most other lyon crates
reexport them.</p>
</td></tr><tr class='module-item'><td><a class="mod" href="quadratic_bezier/index.html" title='lyon_geom::quadratic_bezier mod'>quadratic_bezier</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="mod" href="traits/index.html" title='lyon_geom::traits mod'>traits</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="mod" href="utils/index.html" title='lyon_geom::utils mod'>utils</a></td><td class='docblock-short'></td></tr></table><h2 id='structs' class='section-header'><a href="#structs">Structs</a></h2>
<table><tr class='module-item'><td><a class="struct" href="struct.Arc.html" title='lyon_geom::Arc struct'>Arc</a></td><td class='docblock-short'><p>An elliptic arc curve segment.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.ArcFlags.html" title='lyon_geom::ArcFlags struct'>ArcFlags</a></td><td class='docblock-short'><p>Flag parameters for arcs as described by the SVG specification.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.CubicBezierSegment.html" title='lyon_geom::CubicBezierSegment struct'>CubicBezierSegment</a></td><td class='docblock-short'><p>A 2d curve segment defined by four points: the beginning of the segment, two control
points and the end of the segment.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.Line.html" title='lyon_geom::Line struct'>Line</a></td><td class='docblock-short'><p>An infinite line defined by a point and a vector.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.LineEquation.html" title='lyon_geom::LineEquation struct'>LineEquation</a></td><td class='docblock-short'><p>A line defined by the equation
<code>a * x + b * y + c = 0; a * a + b * b = 1</code>.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.LineSegment.html" title='lyon_geom::LineSegment struct'>LineSegment</a></td><td class='docblock-short'><p>A linear segment.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.Monotonic.html" title='lyon_geom::Monotonic struct'>Monotonic</a></td><td class='docblock-short'><p>A x and y monotonic curve segment, for example <code>Monotonic&lt;QuadraticBezierSegment&gt;</code>.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.QuadraticBezierSegment.html" title='lyon_geom::QuadraticBezierSegment struct'>QuadraticBezierSegment</a></td><td class='docblock-short'><p>A 2d curve segment defined by three points: the beginning of the segment, a control
point and the end of the segment.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.SvgArc.html" title='lyon_geom::SvgArc struct'>SvgArc</a></td><td class='docblock-short'><p>An elliptic arc curve segment using the SVG's end-point notation.</p>
</td></tr><tr class='module-item'><td><a class="struct" href="struct.Triangle.html" title='lyon_geom::Triangle struct'>Triangle</a></td><td class='docblock-short'><p>A 2D triangle defined by three points <code>a</code>, <code>b</code> and <code>c</code>.</p>
</td></tr></table><h2 id='enums' class='section-header'><a href="#enums">Enums</a></h2>
<table><tr class='module-item'><td><a class="enum" href="enum.BezierSegment.html" title='lyon_geom::BezierSegment enum'>BezierSegment</a></td><td class='docblock-short'><p>Either a cubic, quadratic or linear bézier segment.</p>
</td></tr></table><h2 id='traits' class='section-header'><a href="#traits">Traits</a></h2>
<table><tr class='module-item'><td><a class="trait" href="trait.Scalar.html" title='lyon_geom::Scalar trait'>Scalar</a></td><td class='docblock-short'></td></tr><tr class='module-item'><td><a class="trait" href="trait.Segment.html" title='lyon_geom::Segment trait'>Segment</a></td><td class='docblock-short'><p>Common APIs to segment types.</p>
</td></tr></table></section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../";window.currentCrate = "lyon_geom";</script><script src="../aliases.js"></script><script src="../main.js"></script><script defer src="../search-index.js"></script></body></html>